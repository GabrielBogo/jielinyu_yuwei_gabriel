# Makefile
# author: Jielin Yu
# Date: 2018 Nov 29
#
#
# Example: make <Filename>

###################################################
### Run a specific
###################################################
# step 1 clean data
data/amsterdam_clean_listings.csv: data/amsterdam_listings.csv src/clean_data.R
    Rscript src/clean_data.R data/amsterdam_listings.csv data/amsterdam_clean_listings.csv

# step 2 run exploratory data analysis

Rscript src/exploratory_analysis.R data/amsterdam_clean_listings.csv amsterdam

# step 3 Build decision tree model
results/finalized_model.sav results/importance_df.csv results/model_score.csv results/pred.csv:data/amsterdam_clean_listings.csv src/decision_tree_model.py
  python src/decision_tree_model.py data/amsterdam_clean_listings.csv results/


# step 4 export decision tree png
results/Tree_graph.png: results/finalized_model.sav src/decision_tree_exports.py
python src/decision_tree_exports.py results/finalized_model.sav results/

# step 5 Render Markdown file to generate project report
doc/main_report.md:


###################################################
### Run all targets
###################################################
all : doc/main_report.md

###################################################
### Remove all files
###################################################
clean :
	rm -f data/BlackFriday_tidy.csv #remove data
	rm -f results/finalized_model.sav results/importance_df.csv results/model_score.csv results/pred.csv results/Tree_graph.png #remove results
	rm -f doc/main_report.md #remove report 
